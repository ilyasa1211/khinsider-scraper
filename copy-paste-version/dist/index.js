"use strict";var __awaiter=this&&this.__awaiter||function(l,u,c,s){function a(r){return r instanceof c?r:new c(function(t){t(r)})}return new(c||(c=Promise))(function(r,t){function i(o){try{e(s.next(o))}catch(d){t(d)}}function n(o){try{e(s.throw(o))}catch(d){t(d)}}function e(o){o.done?r(o.value):a(o.value).then(i,n)}e((s=s.apply(l,u||[])).next())})},Index;(function(l){class u{static main(){return __awaiter(this,void 0,void 0,function*(){const t=[],i=c.showOptions(),n=yield s.getDownloadPageUrls();for(let e=0;e<n.length;e++){const o=yield a.getDownloadUrl(n[e],i);t.push(o)}c.showResult(t)})}}l.Main=u;class c{static showOptions(){let t={number:10,type:"flac"};return prompt(`Choose:
1. MP3
2. FLAC`)=="1"&&(t={number:9,type:"mp3"}),console.log(`GETTING LINKS FOR ${t.type}`),t}static showResult(t){Array.from(document.body.children).forEach(o=>o.remove());const i=document.createElement("pre"),n=document.createElement("input"),e=document.createElement("p");e.textContent="Copied!",e.setAttribute("id","copy-message"),e.style.visibility="hidden",i.textContent=t.join(`
`),n.setAttribute("type","button"),n.setAttribute("id","copy-button"),n.setAttribute("value","Copy to clipboard"),n.onclick=function(o){return __awaiter(this,void 0,void 0,function*(){navigator.clipboard.writeText(i.textContent),e.style.visibility="visible",setTimeout(()=>{e.style.visibility="hidden"},2e3)})},document.body.appendChild(i),document.body.appendChild(n),document.body.appendChild(e)}static htmlFetch(t){return __awaiter(this,void 0,void 0,function*(){const n=yield(yield fetch(t)).text();return new DOMParser().parseFromString(n,"text/html")})}}l.Utilities=c;class s{static getDownloadPageUrls(){return __awaiter(this,void 0,void 0,function*(){const t=[],n=(yield c.htmlFetch(window.location.href)).querySelectorAll("#songlist > tbody > tr"),e="td:nth-child(3) > a";return Array.from(n).slice(1,-1).forEach(function(o){const d=o.querySelector(e);t.push(d.href)}),t})}}l.FirstScraper=s;class a{static getDownloadUrl(t,i){return __awaiter(this,void 0,void 0,function*(){const n=yield c.htmlFetch(t),e=`#pageContent > p:nth-child(${i.number}) > a`;return n.querySelector(e).getAttribute("href")})}}l.SecondScraper=a})(Index||(Index={})),Index.Main.main();
